{% extends "base.html" %}
{% load i18n %}

{% block title_spacer %}{% endblock %}

{% block title %}
  {% block page_title %}
    UK NSC internal system
  {% endblock %}
{% endblock %}

{% block content %}

  <h2 class="govuk-heading-m">
    Reviews in progress
  </h2>

  <table class="govuk-table">
    <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th class="govuk-table__header">{% trans 'Name' %}</th>
      <th class="govuk-table__header">{% trans 'Type' %}</th>
      <th class="govuk-table__header">{% trans 'Status' %}</th>
      <th class="govuk-table__header">{% trans 'Conditions' %}</th>
    </tr>
    </thead>
    <tbody class="govuk-table__body">
    {% for review in reviews %}
      <tr class="govuk-table__row">
        <td class="govuk-table__cell">
          <a href="{{ review.get_absolute_url }}">
            {{ review.name }}
          </a>
        </td>
        <td class="govuk-table__cell">{{ review.get_review_type_display }}</td>
        <td class="govuk-table__cell">{{ review.get_status_display }}</td>
        <td class="govuk-table__cell">{{ review.policies_display }}</td>
      </tr>
      {% empty %}
      <tr class="govuk-table__row">
        <td class="govuk-table__cell" colspan="4"><p>{% trans 'There are no current reviews.' %}</p></td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

  <h2 class="govuk-heading-m">
    View all conditions
  </h2>

  <p class="govuk-body">
    Use this to start a new review or edit general information about a condition
  </p>

  <div class="link-menu govuk-body">
    <a href="{% url 'review:list' %}" class="govuk-link">
      View all conditions
    </a>
  </div>

  <h2 class="govuk-heading-m">
    Stakeholders
  </h2>

  <p class="govuk-body">
    You can use this to add and edit stakeholders
  </p>

  <div class="link-menu govuk-body">
    <a href="{% url 'organisation:list' %}" class="govuk-link">
      View stakeholder contacts
    </a>
  </div>

  <h2 class="govuk-heading-m">
    Reviews scheduled to start this year
  </h2>

  <table class="govuk-table">
    <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th class="govuk-table__header">{% trans 'Condition' %}</th>
      <th class="govuk-table__header">{% trans 'Due' %}</th>
    </tr>
    </thead>
    <tbody class="govuk-table__body">
    {% for policy in policies %}
      <tr class="govuk-table__row">
        <td class="govuk-table__cell">
          {{ policy.name }}
        </td>
        <td class="govuk-table__cell">{{ policy.next_review_display }}</td>
      </tr>
      {% empty %}
      <tr class="govuk-table__row">
        <td class="govuk-table__cell" colspan="3"><p>{%  trans 'There are no upcoming reviews.' %}</p></td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

{% endblock content %}
