{% extends "base.html" %}
{% load i18n %}

{% block back %}
  {% include 'widgets/back_link.html' %}
{% endblock %}

{% block title %}
  {% block page_title %}{{ form.instance.name }}{% endblock %}
{% endblock %}

{% block content %}

  <form method="post">
    {% csrf_token %}

    {% for hidden in form.hidden_fields %}
      {{ hidden }}
    {% endfor %}

    {{ form.non_field_errors }}

    {% with policy=form.instance %}
      {% if preview %}
        {% include 'policy/public/summary.html' %}
        {% include "policy/public/condition.html" %}
        {% include "policy/public/documents.html" %}
        {% include 'policy/public/organisations.html' %}
        {{ form.next_review.as_hidden }}
        {{ form.condition.as_hidden }}
      {% else %}
        {% include "policy/admin/recommendation.html" %}
        {% include "policy/admin/last_review.html" %}
        {% include "widgets/text_input.html" with field=form.next_review label_size='m' %}
        {% include "policy/admin/documents.html" %}
        {% include "widgets/text_input.html" with field=form.condition label_size='m' %}
        {% include 'policy/admin/review_history.html' %}
        {% include 'policy/admin/organisations.html' %}
      {% endif %}
    {% endwith %}

    {% if preview %}
      <button type="submit" class="govuk-button" name="publish" value="publish">
        {% trans 'Publish' %}
      </button>
    {% else %}
      <button type="submit" class="govuk-button" name="preview" value="preview">
        {% trans 'Preview' %}
      </button>
    {% endif %}

  </form>

{% endblock %}

